<!DOCTYPE html>
<html lang="en">
<!-- Please NOTE that the link to assets (like images) need to be set in global context.
For example:
To access an image from assets folder correct way to set src attribute is 

src = 'profile.png'

instead of 

src = './assets/profile.png'
-->

<head>
   <meta charset="UTF-8" />
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0" />
   <title>Ticket Management App</title>

   <link rel="stylesheet" href="style.css">


</head>

<body>
   <!-- TOOL BOX ELEMENTS -->
   <div class="toolbox-cont">
      <div class="toolbox-priority-cont">
         <div class="lightpink color"></div>
         <div class="lightgreen color"></div>
         <div class="lightblue color"></div>
         <div class="black color"></div>
      </div>


   </div>

   <!-- MAIN CONTAINER - Tickets holder -->
   <div class="main-cont">
      <!-- <div class="ticket-color ${ticketColor}"></div>
       <div class="ticket-id">${id}</div>
       <div class="task-area">${ticketTask}</div>
       <div class="ticket-lock">
       <button>Locked</button>
      </div> -->
   </div>
   </div>

   <!-- MODAL - Ticket generator window -->
   <div class="modal-cont">

      <textarea class="textArea-cont" placeholder="Enter Your Task" spellcheck="false">

       </textarea>


      <div class="priority-colors-container">
         <div class="lightpink priority-color"></div>
         <div class="lightgreen priority-color"></div>
         <div class="lightblue priority-color"></div>
         <div class="black priority-color active"></div>
      </div>

   </div>

   <script src="script.js">
   </script>
   <script>
      //add event listener on card holder
      // find if clecked class is lock or unlock
      // if class is locked 
      // --> change class name unlocked
      // --> change button text unlocked
      // --> change parent content editable
      // else
      // --> change class name  locked
      // --> change button text unlocked
      // --> change parent content non editable
      // update the global object using the ticket id
      // --> get value of the updated text
      // --> find the object inside array 
      // --> update the specific property of that opbject

      let cardHolder = document.querySelector('.main-cont');
      cardHolder.addEventListener('click', function(e){
         let targetElement = e.target;
         let targetClass = targetElement.parentNode.classList[0];
         if(targetClass === 'ticket-lock'){
            targetElement.parentNode.classList.replace('ticket-lock' , 'ticket-unlock');
            targetElement.innerText = 'Unlocked';
            targetElement.closest('.ticket-cont').querySelector('.task-area').setAttribute('contenteditable', 'true');
         }
         else if(targetClass === 'ticket-unlock'){
            targetElement.parentNode.classList.replace('ticket-unlock', 'ticket-lock');
            targetElement.innerText = 'Locked';
            targetElement.closest('.ticket-cont').querySelector('.task-area').setAttribute('contenteditable', 'false');
            let updatedText = targetElement.closest('.ticket-cont').querySelector('.task-area').innerText;
            let currentTicketId = targetElement.closest('.ticket-cont').querySelector('.ticket-id').innerText;
            ticketsArr.forEach(ticket => {
               if (ticket['ticketID'] === currentTicketId) {
                  ticket['ticketTask'] = updatedText;
               }
            });
      
         }   
      });

   </script>
</body>

</html>